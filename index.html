<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <title>Workaholic</title>
  <link rel="stylesheet" href="./node_modules/bootstrap/dist/css/bootstrap.min.css">
  <link rel="stylesheet" href="./node_modules/bootstrap-slider/dist/css/bootstrap-slider.min.css">
  <link rel="stylesheet" href="css/style.css">
</head>
<div class="draggable"></div>

<body style="-webkit-app-region: no-drag">
  <center>
    <img src="app_icons/Logo.png" width="50">
  </center>
  <br>
  <div class="main">
    <div class="prebox_cont">
      <div class="preintrobox">
        <div class="hideOnNeste">
          <input class="basicIncome" type="text" placeholder="Hva er din timelønn?" oninput="sliderValue()" />
        </div>
        <p class="nextButton" onclick='openBox()'>Neste</p>
      </div>
      <div class="prebox3">
        <input id="ex12c" type="text" />
      </div>
      <div class="prebox1">
        <div class="showStartTime">
          Start
          <h2>06.00</h2>
        </div>
      </div>
      <div class="prebox2">
        <div class="showEndTime">
          Slutt
          <h2>17.00</h2>
        </div>
      </div>
      <div class="prebox4result">
        Du tjener
        <p>0</p> i dag.
      </div>

    </div>
  </div>


  <script>
    // You can also require other files to run in this process
    require('./renderer.js')

    var Slider = require("bootstrap-slider");

    var sliderC = new Slider("#ex12c", {
      id: "slider12c",
      min: 0,
      max: 24,
      range: true,
      step: 0.5,
      tooltip: 'always',
      tooltip_split: true,
      value: [6, 17]
    });

    sliderC.on("slide", function (sliderValue) {

      // Calculate Income, runs when slider is slided.
      var income = document.querySelector(".basicIncome").value;
      var startTime = sliderValue[0];
      var endTime = sliderValue[1];
      var workHours = endTime - startTime;
      var basicIncome = workHours * income;

      document.querySelector(".prebox4result p").innerHTML = basicIncome;


      // Normalize slider values      
      function normalize(value) {
        
        var output;

        // remove decimal from value
        var valInt = Math.floor(value);

        // get decimal
        var decimalValue = value - valInt;
        
        // prefix with 0
        if(valInt < 10) output = "0"+ valInt;
        else output = valInt;
        
        // add minutes
        if(decimalValue == .5) output +=".30";
        else output +=".00"
        
        return output;
      }
      
      document.querySelector(".showStartTime h2").innerHTML = normalize(sliderValue[0]);
      document.querySelector(".showEndTime h2").innerHTML = normalize(sliderValue[1]);


    });

    function openBox() { // Skjer det motsatte, navn må byttes.
      document.querySelector(".preintrobox p").innerHTML = "Endre";
      document.querySelector(".preintrobox").style.height = '45px';
      document.querySelector(".nextButton").style.height = '45px';
      document.querySelector(".nextButton").classList.add("smoothSlide");
      document.querySelector(".preintrobox").style.color = 'grey';
      document.querySelector(".preintrobox").classList.add("smoothSlide");
      document.querySelector(".preintrobox p").setAttribute('onclick', 'closeBox()');
      document.querySelector(".prebox1").classList.add("showBox");
      document.querySelector(".prebox1").classList.remove("hideBox");
      document.querySelector(".prebox2").classList.add("showBox");
      document.querySelector(".prebox2").classList.remove("hideBox");
      document.querySelector(".prebox3").classList.add("showBox");
      document.querySelector(".prebox3").classList.remove("hideBox");
      document.querySelector(".hideOnNeste").classList.add("hideBox");
      document.querySelector(".hideOnNeste").classList.remove("showBox");
      document.querySelector(".prebox4result").classList.remove("hideBox");
      document.querySelector(".prebox4result").classList.add("showBox");
    }

    function closeBox() {
      document.querySelector(".preintrobox p").innerHTML = "Lukk";
      document.querySelector(".preintrobox").style.height = '200px';
      document.querySelector(".preintrobox").classList.add("smoothSlide");
      document.querySelector(".nextButton").style.height = '200px';
      document.querySelector(".nextButton").classList.add("smoothSlide");
      document.querySelector(".preintrobox p").setAttribute('onclick', 'openBox()');
      document.querySelector(".prebox1").classList.add("hideBox");
      document.querySelector(".prebox1").classList.remove("showBox");
      document.querySelector(".prebox2").classList.add("hideBox");
      document.querySelector(".prebox2").classList.remove("showBox");
      document.querySelector(".prebox3").classList.add("hideBox");
      document.querySelector(".prebox3").classList.remove("showBox");
      document.querySelector(".hideOnNeste").classList.remove("hideBox");
      document.querySelector(".hideOnNeste").classList.add("showBox");
      document.querySelector(".prebox4result").classList.add("hideBox");
      document.querySelector(".prebox4result").classList.remove("showBox");

    }
  </script>
</body>

</html>